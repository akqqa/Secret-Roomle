<!DOCTYPE html>
<html lang="en" style="scrollbar-gutter: stable;">
  <head>
    <title>Endless Roomle</title>
    <meta name="description" content="Practice your Secret Room knowledge with endless challenges!" />
    <link rel="icon" href="images/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <link rel="preload" href="./fonts/upheavtt.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="canonical" href="https://roomle.net/endless" />
  </head>
  <body id="body" class="endless">
    <script src="//cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script> 
    <div id="outerDiv"> <!-- Div to get everything vertically in the center  -->
      <div id="howToPlayModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2 style="color:white;font-weight: normal;"> How to Play </h2>
          <p>In Secret Roomle, your goal is to uncover the two secret rooms on today's floor! </p>
          <p>Click any empty space on the map to place a bomb where you think a secret room might be.</p>
          <p>If you find both the secret and the super secret room without running out of bombs, you win!</p>
          <p>Missed bombs reveal new information about the map such as room types and rocks blocking walls.</p>
          <p>Come back every day for a new floor, or try endless mode to practice your knowledge.</p>
          <p>Want a challenge? Toggle Ultra Secret rooms by clicking the red key before starting a game!</p>
          <h2 style="color:white;font-weight: normal;"> Tips </h2>
          <p>The secret room is likely to be surrounded by many other rooms.</p>
          <p>The super secret room is only connected to one normal room, and is often close to the boss or shop.</p>
          <p>If a rock is on the wall of a room, that means it is blocking a secret room from spawning there.</p>
          <p>Ultra secret rooms will always spawn one room away from any normal rooms, with a red room connecting them.</p>
          <p>Ultra secret rooms are more likely to spawn where they are connected to over 3 normal rooms via adjacent red rooms.</p>
          <p>Ultra secret rooms cannot be connected to a curse room, boss room, or secret room.</p>
          <p>For more detailed information about secret room generation, click <a href="https://bindingofisaacrebirth.wiki.gg/wiki/Secret_Room">here</a></p>
        </div>
      </div>
      <div id="aboutModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2 style="color:white; font-weight: normal;"> About </h2>
          <p>I started this project initially as just a recreation of the Isaac room generation algorithm, as I was interested in how it worked behind the scenes. I soon realised it would be really helpful to have a tool to practice my knowledge of secret rooms with, and from there I got the idea of a daily game. This site has both - a daily challenge and an endless mode for practice.</p>
          <p>The algorithm should be almost identical to the game, so its a great tool to build an intuition for secret room locations! I hope you have fun with the site, as it was a lot of fun making it : )</p>
          <p>This is just the first version, and more might be added in the future ( large rooms and ultra secret rooms to name a few ). If you have any feedback, bugs or feature requests please dm me on <a href="https://www.reddit.com/user/akqqa/">reddit</a>, feel free to check out the <a href="https://github.com/Akqqa/Secret-Roomle">github</a> to see the spaghetti code, and if you're feeling generous you can support the site on <a href="https://ko-fi.com/akqqa">Ko-fi</a>.</p>
          <h2 style="color:white; font-weight: normal;"> Planned Updates </h2>
          <ul>
            <li>Main menu page</li>
            <li>A Daily Run mode where each day you have to go through 11 floors</li>
          </ul>
          <h2 style="color:white; font-weight: normal;"> Credits </h2>
          <p>Please note that this is a fan creation, and is not officially associated with The Binding of Isaac or its creators.</p>
          <p>Thanks to:</p>
          <ul>
            <li>thelord777 for helping me figure out how to make the frontend look decent!</li>
            <li><a href="https://isaacle.net">isaacle</a> for being the first to do an isaac based daily game, and for giving me inspiration on the look of the site</li>
            <li>The <a href="https://bindingofisaacrebirth.wiki.gg/wiki/Level_Generation">Isaac wiki</a> for details on the level generation algorithm</li>
            <li><a href="https://www.boristhebrave.com/2020/09/12/dungeon-generation-in-binding-of-isaac/">boris the brave</a> for details on the level generation algorithm</li>
          </ul>
        </div>
      </div>
      <div id="mainDiv"> <!-- Main Div  -->
        <h1 id="titleName">Secret Roomle</h1>
        <p id="floornamep"><span id="floorname"></span>, <span id="cursename">no curse</span></p>
        <div id="verticalContentDiv"> <!-- Div containing main vertical content -->
          <div class="topbar">
            <p id="bombsRemaining">Bombs Remaining: <span id="guessesremaining"></span></p>
            <div class="ultra-button-container" style="right: 50px">
              <button id=ultraButton class="ultra-button"></button>
            </div>
            <div class="mute-button-container">
              <button id=muteButton class="mute-button"></button>
            </div>
          </div>
          <canvas id="gameCanvas" width="300" height="300"></canvas>
          <div class="buttons" >
            <div class="image-button-container">
              <button id="howToPlayButton" class="image-button">
                How to Play
              </button>
            </div>
            <div class="image-button-container">
              <button onclick="window.location.href='index.html'" class="image-button-4">
                Daily Mode
              </button>
            </div>
            <div id="aboutButton" class="image-button-container">
              <button class="image-button">
                About
              </button>
            </div>
            <div class="image-button-container-3">
              <button id="resetButton" class="image-button-3">
              </button>
            </div>
          </div>
        </div> 
        
      </div>
    </div>
  
    <script type="module" src="endless.js"></script>
    <!--Mobile detector script to fix bug with blurry background on mobile causing lag-->
    <script>
      const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
      if (isMobile) {
        document.body.style.backdropFilter = 'none';
      }
    </script>
    <!--Modal logic - https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_modal-->
    <script>
      // Get the modal
      var modal1 = document.getElementById("howToPlayModal");
      var modal2 = document.getElementById("aboutModal");
      // Get the button that opens the modal
      var btn1 = document.getElementById("howToPlayButton");
      var btn2 = document.getElementById("aboutButton");
      // Get the <span> element that closes the modal
      var span1 = modal1.getElementsByClassName("close")[0];
      var span2 = modal2.getElementsByClassName("close")[0];
      const scrollTarget = window.innerHeight * 0;
      // When the user clicks the button, open the modal 
      btn1.onclick = function() {
        modal1.style.display = "block";
        if (window.scrollY > scrollTarget) {
          window.scrollTo({
            top: scrollTarget,
            behavior: "smooth"
          });
        }
        
      }
      btn2.onclick = function() {
        modal2.style.display = "block";
        if (window.scrollY > scrollTarget) {
          window.scrollTo({
            top: scrollTarget,
            behavior: "smooth"
          });
        }
      }
      
      // When the user clicks on <span> (x), close the modal
      span1.onclick = function() {
        modal1.style.display = "none";
      }
      span2.onclick = function() {
        modal2.style.display = "none";
      }
      
      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
        if (event.target == modal1) {
          modal1.style.display = "none";
        }
        if (event.target == modal2) {
          modal2.style.display = "none";
        }
      }
      </script>
  </body>
</html>
