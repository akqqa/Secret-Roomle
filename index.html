<!DOCTYPE html>
<html lang="en" style="scrollbar-gutter: stable;">
  <head>
    <title>Secret Roomle</title>
    <meta name="description" content="Find the Secret Rooms on a new floor every day!" />
    <link rel="icon" href="images/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="google-site-verification" content="4FwcroNbI2iSBD6e4GgvAt6tbwaMa39tec8bm632oHg" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "648a8b3af87d4c54892aeb6ace173f27"}'></script><!-- End Cloudflare Web Analytics -->
    <script type="module" src="main.js"></script>
    <link rel="preload" href="./fonts/upheavtt.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="canonical" href="https://roomle.net/" />
  </head>
  <body id="body" class="index">
    <script src="//cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1312088545912422"
     crossorigin="anonymous"></script>
    <div id="outerDiv"> <!-- Div to get everything vertically in the center  -->
      <div id="pollModal" class="modal-2">
        <div class="modal-content-2" style="margin-top: 30%";>
          <span class="close">&times;</span>
          <h2 style="color:white;font-weight: normal;">Message</h2>
          <p>Admin message goes here</p>
        </div>
      </div>
      <div id="welcomeModal" class="modal" style="margin-top: 10%";>
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2 style="color:white;font-weight: normal;">Welcome to Secret Roomle!</span></h2>
          <p>Click the empty spaces on the map where you think secret rooms could be!</p>
          <p>You can enable <span style="color: #9F0000">Ultra Secret rooms</span> by clicking the red key outline <u>before starting a game</u>.</p>
          <p>Good luck!</p>
        </div>
      </div>
      <div id="howToPlayModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2 style="color:white;font-weight: normal;"> How to Play </h2>
          <p>In Secret Roomle, your goal is to uncover the two secret rooms on today's floor! </p>
          <p>Click any empty space on the map to place a bomb where you think a secret room might be.</p>
          <p>If you find both the secret and the super secret room without running out of bombs, you win!</p>
          <p>Missed bombs reveal new information about the map such as room types and rocks blocking walls.</p>
          <p>Come back every day for a new floor, or try endless mode to practice your knowledge.</p>
          <p>Want a challenge? Toggle <span style="color: #9F0000">Ultra Secret rooms</span> by clicking the red key <u>before starting a game</u>.</p>
          <h2 style="color:white;font-weight: normal;"> Tips </h2>
          <p>The secret room is likely to be surrounded by many other rooms.</p>
          <p>The super secret room is only connected to one normal room, and is often close to the boss or shop.</p>
          <p>If a rock is on the wall of a room, that means it is blocking a secret room from spawning there.</p>
          <p>Ultra secret rooms will always spawn one room away from any normal rooms, with a red room connecting them.</p>
          <p>Ultra secret rooms are more likely to spawn where they are connected to over 3 normal rooms via adjacent red rooms.</p>
          <p>Ultra secret rooms cannot be connected to a curse room, boss room, or secret room.</p>
          <p>For more detailed information about secret room generation, click <a href="https://bindingofisaacrebirth.wiki.gg/wiki/Secret_Room">here</a></p>
        </div>
      </div>
      <div id="aboutModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2 style="color:white;font-weight: normal;">New Update! - Minor Additions</h2>
          <p></p>
          <p>Recent bugfixes and additions:</p>
          <ul>
            <li>Timer added to endless mode</li>
            <li>Fastest times are now recorded in the stats menu</li>
            <li><span style="color: #9F0000">Ultra Secret Rooms</span> can be discovered by bombing adjacent red rooms</li>
            <li>Rocks now spawn in Chest/Dark room at a reduced rate</li>
            <li><span style="color: #9F0000">Ultra Secret Rooms</span> no longer spawn on the map's edge</li>
            <li>Mute no longer overrides the state of Ultra Secret mode being on</li>
          </ul>
          <h2 style="color:white;font-weight: normal;">New Update! - <span style="color: #9F0000">Ultra Secret Roomle</span></h2>
          <p></p>
          <p>Want a challenge? Enable <span style="color: #9F0000">Ultra Secret rooms</span> by clicking the red key outline before starting a game.</p>
          <p>In this mode you must select all secret rooms including the <span style="color: #9F0000">Ultra Secret room</span> to win. Selecting valid rooms adjacent to the <span style="color: #9F0000">Ultra Secret room</span> will also unlock it.</p>
          <p>Good luck!</p>
          <h2 style="color:white; font-weight: normal;"> About </h2>
          <p>I started this project initially as just a recreation of the Isaac room generation algorithm, as I was interested in how it worked behind the scenes. I soon realised it would be really helpful to have a tool to practice my knowledge of secret rooms with, and from there I got the idea of a daily game. This site has both - a daily challenge and an endless mode for practice.</p>
          <p>The algorithm should be quite close to the game, so its a great tool to build an intuition for secret room locations! It's not a 1-to-1 recration however so be warned. I hope you have fun with the site, as it was a lot of fun making it : )</p>
          <p>If you have any feedback, bug reports or feature requests please dm me on <a href="https://www.reddit.com/user/akqqa/">reddit</a>, feel free to check out the <a href="https://github.com/Akqqa/Secret-Roomle">github</a> to see the spaghetti code, and if you're feeling generous you can support the site on <a href="https://ko-fi.com/akqqa">Ko-fi</a>.</p>
          <h2 style="color:white; font-weight: normal;"> Planned Updates </h2>
          <ul>
            <li>Customisable generation and seeds in endless mode</li>
            <li>Note that adding differently sized rooms is <em>not</em> planned due to it requiring a rework of the code :(</li>
          </ul>
          <h2 style="color:white; font-weight: normal;"> Credits </h2>
          <p>Please note that this is a fan creation, and is not officially associated with The Binding of Isaac or its creators.</p>
          <p>Thanks to:</p>
          <ul>
            <li>thelord777 for helping me figure out how to make the frontend look decent!</li>
            <li><a href="https://isaacle.net">isaacle</a> for being the first to do an isaac based daily game, and for giving me inspiration on the look of the site</li>
            <li>The <a href="https://bindingofisaacrebirth.wiki.gg/wiki/Level_Generation">Isaac wiki</a> for details on the level generation algorithm</li>
            <li><a href="https://www.boristhebrave.com/2020/09/12/dungeon-generation-in-binding-of-isaac/">boris the brave</a> for details on the level generation algorithm</li>
            <li>Dio/Mash√π Slyferiux for feedback on making the generation algorithm more accurate</li>
          </ul>
        </div>
      </div>
      <div id="gameOverModal" class="modal-2">
        <div class="modal-content-2">
          <span class="close">&times;</span>
          <p id="gameOverText" style="white-space: pre-line;"></p>
          <div id="copyButton" class="image-button-container">
            <button class="image-button">
              Copy Results
            </button>
          </div>
        </div>
      </div>
      <div id="mainDiv"> <!-- Main Div  -->
        <h1 id="titleName">Secret Roomle</h1>
        <p id="floornamep"><span id="floorname"></span>, <span id="cursename">no curse</span></p>
        <div id="verticalContentDiv"> <!-- Div containing main vertical content -->
          <div class="topbar">
            <p id="bombsRemaining">Bombs Remaining: <span id="guessesremaining"></span></p>
            <div class="ultra-button-container" style="right: 50px">
              <button id=ultraButton class="ultra-button"></button>
            </div>
            <div class="mute-button-container">
              <button id=muteButton class="mute-button"></button>
            </div>
          </div>
          <canvas id="gameCanvas" width="300" height="300"></canvas>
          <div class="timerDiv" style="text-align: left;">
            <p style="margin: 0; display: inline-block;">Time: <span id="timerSpan" style="width: 6ch; display: inline-block;">0</span></p>
          </div>
          <div class="buttons" >
            <div class="image-button-container">
              <button id="howToPlayButton" class="image-button">
                How to Play
              </button>
            </div>
            <div class="image-button-container">
              <button onclick="window.location.href='endless.html'" class="image-button-2">
                Endless Mode
              </button>
            </div>
            <div id="aboutButton" class="image-button-container">
              <button class="image-button">
                About
              </button>
            </div>
          </div>
          <div id="countdownDiv">
            <p style="margin: 0">New floor in <span id="countdown" ></span></p>
          </div>
          <div id="statsDiv">
            <h2 style="font-size: clamp(2rem, 8vw, 3rem); margin-top: 0; color: white; font-weight: normal;">Lifetime Stats:</h2>
            <p>Games Played: <span id="gamesPlayed"></span></p>
            <p>Wins: <span id="gamesWon"></span></p>
            <p>Secret Rooms Found: <span id="secretRoomsFound"></span></p>
            <p>Super Secret Rooms Found: <span id="superSecretRoomsFound"></span></p>
            <p><span style="color: #9F0000"></span>Ultra Secret Rooms Found: <span id="ultraSecretRoomsFound"></span></p>
            <p>Current Winstreak: <span id="currentWinstreak"></span></p>
            <p>Best Winstreak: <span id="bestWinstreak"></span></p>
            <p>Fastest Time - Normal: <span id="fastestTime"></span></p>
            <p>Fastest Time - Ultra: <span id="fastestTimeUltra"></span></p>

          </div>
      </div>
      <footer style="text-align:center; padding-top:20px;">
        <a href="https://github.com/akqqa/Secret-Roomle" target="_blank" style="color:#000;text-decoration: none;">
           <img src="images/github-mark.svg" alt="GitHub" style="width:32px; height:32px;filter: brightness(0);">
        </a>
        <a href="https://reddit.com/u/akqqa" target="_blank" style="color:#000;text-decoration: none;">
           <img src="images/reddit.svg" alt="Reddit" style="width:32px; height:32px;filter: brightness(0);">
        </a>
        <a href="https://ko-fi.com/akqqa" target="_blank" style="color:#000;text-decoration: none;">
           <img src="images/kofi.svg" alt="Kofi" style="width:32px; height:32px;filter: brightness(0);">
        </a>
      </footer>
    </div>

    

  
    <!--Mobile detector script to fix bug with blurry background on mobile causing lag-->
    <script>
      const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
      if (isMobile) {
        document.body.style.backdropFilter = 'none';
      }
    </script>
    <!--Modal logic - https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_modal-->
    <script>
      // Get the modal
      var modal1 = document.getElementById("howToPlayModal");
      var modal2 = document.getElementById("aboutModal");
      var modal3 = document.getElementById("gameOverModal");
      var modal4 = document.getElementById("pollModal");
      var modal5 = document.getElementById("welcomeModal");
      // Get the button that opens the modal
      var btn1 = document.getElementById("howToPlayButton");
      var btn2 = document.getElementById("aboutButton");
      // Get the <span> element that closes the modal
      var span1 = modal1.getElementsByClassName("close")[0];
      var span2 = modal2.getElementsByClassName("close")[0];
      var span3 = modal3.getElementsByClassName("close")[0];
      var span4 = modal4.getElementsByClassName("close")[0];
      var span5 = modal5.getElementsByClassName("close")[0];
      const scrollTarget = window.innerHeight * 0;
      
      // When the user clicks the button, open the modal 
      btn1.onclick = function() {
        modal1.style.display = "block";
        if (window.scrollY > scrollTarget) {
          window.scrollTo({
            top: scrollTarget,
            behavior: "smooth"
          });
        }
        
      }
      btn2.onclick = function() {
        modal2.style.display = "block";
        if (window.scrollY > scrollTarget) {
          window.scrollTo({
            top: scrollTarget,
            behavior: "smooth"
          });
        }
      }

      var newUser = localStorage.getItem("newUser2");
      if (!newUser) {
        modal5.style.display="block";
        localStorage.setItem("newUser2", true);
      }
      

      // window.onload = function () {
      //   document.getElementById('pollModal').style.display = 'block';
      // };
      
      // When the user clicks on <span> (x), close the modal
      span1.onclick = function() {
        modal1.style.display = "none";
      }
      span2.onclick = function() {
        modal2.style.display = "none";
      }
      span3.onclick = function() {
        modal3.style.display = "none";
      }
      span4.onclick = function() {
        modal4.style.display = "none";
      }
      span5.onclick = function() {
        modal5.style.display = "none";
      }
      
      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
        if (event.target == modal1) {
          modal1.style.display = "none";
        }
        if (event.target == modal2) {
          modal2.style.display = "none";
        }
        if (event.target == modal4) {
          modal4.style.display = "none";
        }
        // if (event.target == modal5) {
        //   modal5.style.display = "none";
        // }
      }
      </script>
  </body>
</html>
